{
    "dataset": {
        "name": "netstack",
        "input_snapshot": "strap",
        "output_snapshot": "image"
    },

    "steps": [
        { "t": "pkg_install", "pkgs": [
            "/editor/vim",
            "/terminal/tmux",
            "/network/rsync",
            "/system/library/gcc-runtime",
            "/system/library/g++-runtime",
            "/network/ftp",
            "/network/openssh-server",
            "/network/telnet",
            "/service/network/ntpsec",
            "/web/curl",
            "/web/wget"
        ] },

        { "t": "ensure_file", "file": "/opt/xde.p5p",
            "src": "xde.p5p",
            "owner": "root", "group": "root", "mode": "644" },

        { "t": "pkg_set_p5p_publisher",
            "archive": "/opt/xde.p5p" },

        { "t": "ensure_file", "file": "/opt/mg.p5p",
            "src": "mg.p5p",
            "owner": "root", "group": "root", "mode": "644" },

        { "t": "pkg_set_p5p_publisher",
            "archive": "/opt/mg.p5p" },

        { "t": "ensure_file", "file": "/opt/opte.p5p",
            "src": "opte.p5p",
            "owner": "root", "group": "root", "mode": "644" },

        { "t": "ensure_file", "file": "/kernel/drv/xde.conf",
            "src": "xde.conf",
            "owner": "root", "group": "root", "mode": "644" },

        { "t": "pkg_set_p5p_publisher",
            "archive": "/opt/opte.p5p" },

        { "t": "ensure_file", "file": "/root/.profile",
            "src": "root-bash-profile",
            "owner": "root", "group": "root", "mode": "644" },

        { "t": "pkg_set_publisher",
            "publisher": "helios-dev",
            "sticky": false },

        { "t": "pkg_refresh", "full": true },

        { "t": "pkg_update" },

        { "t": "pkg_install", "pkgs": [
            "maghemite",
            "opte"
        ] },

        { "t": "pkg_install", "pkgs": [
            "/driver/storage/vio9p"
        ] },

        { "t": "ensure_file",
            "file": "/var/svc/profile/site.xml",
            "src": "netstack.xml",
            "owner": "root", "group": "root", "mode": "644"
        },

        { "t": "pkg_set_property",
            "name": "auto-be-name", "value": "helios-%r" },

        { "t": "pkg_set_property",
            "name": "ca-path", "value": "/etc/ssl/certs" },

        { "t": "pkg_purge_history" },

        { "t": "seed_smf", "apply_site": true, "debug": true }
    ]
}
